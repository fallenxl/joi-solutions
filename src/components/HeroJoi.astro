---
import ArrowRight from "../icons/ArrowRight.astro";
import { Image } from "astro:assets";
import heroBg from "../assets/hero-bg.svg";
import deviceJoiPay from "../assets/js-1.png";
import mobileJoi from "../assets/mobile-js.png"
import band from "../assets/band-1.png";
import JoiSolutionsIcon from "../icons/JoiSolutionsIcon.astro";
---

<section class="relative overflow-hidden">
  <!-- bg gradient bottom -->
  <!-- <div
    class="absolute inset-0 bg-gradient-to-b from-neutral-50 to-primary/60 opacity-10"
  >
  </div> -->
  <div
    class="w-full max-w-screen-xl mx-auto flex flex-col md:flex-row  items-center pt-36 pb-10 overflow-hidden justify-center px-4 md:pl-2 relative h-screen md:min-h-[80vh] 3xl:h-[10vh]"
  >
    <div
      class="text-[1.8em] leading-[1.3em] xl:text-4xl 3xl:text-[5em] flex flex-col gap-2 items-center md:items-start text-neutral-700  text-balance"
    >
      <span class="font-medium animate-text text-center md:text-left">
      Revoluciona el pago escolar con control y seguridad
       <span
          class="text-tertiary font-black">.</span
        ></span
      >
      <small class=" px-2 text-sm md:text-xl text-neutral-500 animate-text text-balance text-center md:text-left">
        Simplificando la tecnología, inspirando momentos<span
          class="text-tertiary">.</span
        ></small
      >
      <div
        class="mt-10 text-sm md:text-lg flex items-center gap-2 text-neutral-800"
      >
        <!-- <a
          href="/productos"
          class="bg-neutral-50 px-8 text-neutral-700 py-3 rounded-full shadow-lg cursor-trigger cursor-pointer border border-neutral-200 animate-button relative z-[40]"
        >
          <span class="relative z-[60] font-medium">Explorar</span>
        </a> -->
        <a
          href="/contacto"
          class="bg-tertiary px-8 text-white py-3 rounded-full shadow-lg cursor-trigger cursor-pointer border border-tertiary animate-button relative z-[40] flex items-center gap-2"
        >
          <span class="relative z-[60] font-medium">Ir a mundo JoiSolutions</span>
          <ArrowRight class="w-4 h-4 stroke-white" />
        </a>
      </div>
    </div>
    <div>
    <div
      class=" flex gap-10 px-4 py-5 md:py-20"
    >
      <div class="relative ">
        <Image
          src={deviceJoiPay}
          draggable="false"
          alt="Device JoiSolutions"
          class="relative z-10 w-[90%] h-auto md:w-[800px] 3xl:w-[800px] mx-auto right-[1em] md:right-[2em]"
        />
        <Image
          src={mobileJoi}
          alt="Mobile JoiSolutions"
          class="z-20 w-[30%] md:w-[180px] absolute top-[5em] md:top-[4em] -right-[1em] md:-right-[2em]  "
          draggable="false"
          loading="lazy"
        />
        <Image
          src={band}
          alt="Band JoiSolutions"
          class="z-20 w-[35%] md:w-[180px] absolute top-[6em] md:top-[6em] -left-[1.5em] md:-left-[4em]  band"
          draggable="false"
          loading="lazy"
        />
      </div>

    </div>
  </div>
  </div>
  <!-- Partículas animadas -->
  <div class="absolute inset-0 -z-[10] pointer-events-none">
    <Image
      src={heroBg}
      alt="Background"
      class="w-full h-full object-cover opacity-50"
      loading="lazy"
      width={1920}
      height={1080}
      priority
    />

    <!-- Overlay radial para enfocar el centro -->
    <div
      class="absolute top-0 left-0 w-full h-full bg-[radial-gradient(ellipse_at_60%_40%,_rgba(0,0,0,0)_0%,_rgba(255,255,255,0.8)_60%)] pointer-events-none mix-blend-screen"
    >
    </div>
  </div>
</section>

<script>
  import gsap from "gsap";
  import { SplitText } from "gsap/SplitText";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(SplitText, ScrollTrigger);

  const animateButton = document.querySelectorAll(
    ".animate-button"
  ) as NodeListOf<HTMLElement>;
  const splitText = new SplitText(".animate-text", {
    type: "words",
    aria: "hidden",
  });

  const words = splitText.words;
  const tl = gsap.timeline({
    defaults: { duration: 0.5, ease: "power2.out" },
  });
//   tl.delay(2.5);
  tl.from(words, {
    opacity: 0,
    stagger: 0.1,
    duration: 2,
    ease: "sine.out",
  });

  animateButton.forEach((button) => {
    tl.from(
      button,
      {
        opacity: 0,
        scale: 0.8,
        duration: 0.5,
        ease: "power2.out",
      },
      "<0.5"
    );
  });

  // levitating device
  const device = document.querySelector(".parallax-device") as HTMLElement;
  gsap.to(device, {
    y: -20,
    ease: "sine.inOut",
    repeat: -1,
    yoyo: true,
    duration: 2,
  });
</script>
